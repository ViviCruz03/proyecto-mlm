{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="accion_container1">
  <div class="d-flex justify-content-between align-items-center">
    <h3>Unidades Seleccionadas</h3>
    <img src="{% static 'img/Logo-1.png' %}" alt="Mappit Logo" width="100">
  </div>
  <div>
    <h4>Asesor: <b>{{ user.get_username }}</b> </h4>
  </div>
  <br><br>
  <div class="container-m d-flex gap-2">
    <div class="table-responsive">
      <table class="table table-bordered" id="tablaSeguimiento">
        <thead class="table-primary">
          <tr>
            <th>Nombre</th>
            <th>Estrato</th>
            <th>Vialidad</th>
            <th>CÃ³digo Postal</th>
            <th>Latitud</th>
            <th>Longitud</th>
            <th>Fecha</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
  
        </tbody>
      </table>
    </div>
    <div class="table-responsive">
      <iframe 
    src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3739.4245971921537!2d-100.03549422530189!3d20.40660120885755!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjDCsDI0JzIzLjgiTiAxMDDCsDAxJzU4LjUiVw!5e0!3m2!1ses!2smx!4v1742402959076!5m2!1ses!2smx" width="900" height="600" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
    </iframe>
    </div>
  </div>
    <div class="mt-4 d-flex justify-content-end gap-2">
      <button class="btn btn-danger">ATRAS</button>
      <button class="btn btn-primary">PAUSAR Y GUARDAR</button>
      <button class="btn btn-success">GUARDAR</button>
    </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    let seleccionados = JSON.parse(localStorage.getItem("seleccionados"));
    if (!seleccionados || seleccionados.length === 0) {
      alert("No hay datos seleccionados.");
      return;
    }
    let tabla = document.getElementById("tablaSeguimiento").getElementsByTagName('tbody')[0];
    seleccionados.forEach(item => {
      let fila = `<tr>
                      <td>${item.Nombre}</td>
                      <td>${item.Estrato}</td>
                      <td>${item.Vialidad}</td>
                      <td>${item.CP}</td>
                      <td>${item.Latitud}</td>
                      <td>${item.Longitud}</td>
                      <td>${item.Fecha}</td>
                  </tr>`;
      tabla.innerHTML += fila;
    });
  });
</script>
{% endblock %}